{"version":3,"file":"static/js/201.5949ab37.chunk.js","mappings":"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","sources":["features/dadata.ts","entities/company/form.tsx","pages/companies/index.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { utimes } from \"fs\";\r\nimport { api } from \"shared/config/api\";\r\n\r\nexport const DADATA_API = {\r\n  async getCompany(query: string) {\r\n    try {\r\n      const options = await axios.post(\r\n        \"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party\",\r\n        { query },\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n            Authorization: \"Token f72f5381ea6760b06b1034d298d2c9bce5824346\",\r\n          },\r\n        }\r\n      );\r\n    //   const result = options.data.suggestions\r\n      const result = options.data.suggestions.map((item: any) => ({inn: item.data.inn, name: item.value}))\r\n      console.log(\"üöÄ ~ file: dadata.ts ~ line 19 ~ getCompany ~ result\", result)\r\n      return result;\r\n    } catch (error) {}\r\n  },\r\n};\r\n","import NiceModal, { useModal, antdModal } from \"@ebay/nice-modal-react\";\r\nimport { Form, Input, Modal, Select, Spin } from \"antd\";\r\nimport { DADATA_API } from \"features/dadata\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { ICompany } from \"./types\";\r\n\r\nconst { Option } = Select;\r\n\r\nexport default NiceModal.create(({ company }: { company: ICompany }) => {\r\n  const [options, setOptions] = useState<any[]>([]);\r\n\r\n  const modal = useModal();\r\n  const [form] = Form.useForm();\r\n\r\n  const onSearch = async (value: string) => {\r\n    const newOptions = await DADATA_API.getCompany(value);\r\n    setOptions(newOptions);\r\n  };\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    form.validateFields().then(() => {\r\n      const newCompany = { ...form.getFieldsValue() };\r\n      modal.resolve(newCompany);\r\n      modal.hide();\r\n    });\r\n  }, [\r\n    modal,\r\n    // user,\r\n    form,\r\n  ]);\r\n\r\n  return (\r\n    <Modal\r\n      {...antdModal(modal)}\r\n      title=\"–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é\"\r\n      okText=\"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\"\r\n      cancelText=\"–û—Ç–º–µ–Ω–∞\"\r\n      onOk={handleSubmit}\r\n    >\r\n      <Form form={form} layout=\"vertical\">\r\n        <Form.Item\r\n          name=\"inn\"\r\n          label=\"–ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω–æ–µ –ø–æ–ª–µ\",\r\n            },\r\n          ]}\r\n        >\r\n          <Select\r\n            showSearch\r\n            filterOption={false}\r\n            onSearch={onSearch}\r\n            // notFoundContent={fetching ? <Spin size=\"small\" /> : null}\r\n          >\r\n            {options.map((option) => (\r\n              <Option value={option.inn}>\r\n                <span>{option.name} </span>\r\n                <span style={{ color: \"gray\", fontSize: \"10px\" }}>\r\n                  {option.inn}\r\n                </span>\r\n              </Option>\r\n            ))}\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n});\r\n","import { useCallback, useEffect } from \"react\";\r\nimport { Button, Card, Table } from \"antd\";\r\nimport { useModal } from \"@ebay/nice-modal-react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport CompanyForm from \"entities/company/form\";\r\nimport { useStore } from \"entities/store\";\r\n\r\nconst CompaniesPage = () => {\r\n  const history = useNavigate();\r\n\r\n  const { companies, addCompany, getCompanies, user_id } = useStore((state) => state);\r\n  console.log(\"üöÄ ~ file: index.tsx ~ line 13 ~ CompaniesPage ~ user_id\", user_id)\r\n\r\n  const clickHandler = (id: string) => {\r\n    history(\"/companies/\" + id);\r\n  };\r\n\r\n  const navigate = useNavigate()\r\n\r\n  const userModal = useModal(CompanyForm);\r\n\r\n  const handleNewItem = useCallback(() => {\r\n    userModal.show().then((newItem: any) => {\r\n      addCompany(newItem, user_id);\r\n    });\r\n  }, [userModal, companies]);\r\n\r\n  useEffect(() => {\r\n    if (!user_id) {\r\n      return navigate(\"/login\");\r\n    }\r\n    getCompanies(user_id);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <h1>–ö–æ–º–ø–∞–Ω–∏–∏</h1>\r\n      <Button type=\"primary\" onClick={handleNewItem}>\r\n        + –ù–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è\r\n      </Button>\r\n      <div className=\"cards\">\r\n        {companies.map((company) => (\r\n          <Card\r\n            hoverable\r\n            key={company.id}\r\n            title={\"–û–û–û \" + company.name}\r\n            onClick={() => clickHandler(company.id)}\r\n          >\r\n            <span>{`–ò–ù–ù - ${company.inn}, –û–ì–†–ù - ${company?.ogrn}`}</span>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompaniesPage;\r\n"],"names":["DADATA_API","getCompany","query","axios","headers","Accept","Authorization","options","result","data","suggestions","map","item","inn","name","value","console","log","Option","Select","NiceModal","company","useState","setOptions","modal","useModal","Form","form","onSearch","newOptions","handleSubmit","useCallback","validateFields","then","newCompany","getFieldsValue","resolve","hide","antdModal","title","okText","cancelText","onOk","layout","label","rules","required","message","showSearch","filterOption","option","style","color","fontSize","history","useNavigate","useStore","state","companies","addCompany","getCompanies","user_id","navigate","userModal","CompanyForm","handleNewItem","show","newItem","useEffect","className","type","onClick","hoverable","id","ogrn"],"sourceRoot":""}